(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{21:function(e,t,c){"use strict";c.r(t),c.d(t,"PRODUCT_LIST_REQUEST",(function(){return r})),c.d(t,"PRODUCT_LIST_SUCCESS",(function(){return n})),c.d(t,"PRODUCT_LIST_FAIL",(function(){return a})),c.d(t,"PRODUCT_DETAILS_REQUEST",(function(){return s})),c.d(t,"PRODUCT_DETAILS_SUCCESS",(function(){return i})),c.d(t,"PRODUCT_DETAILS_FAIL",(function(){return d})),c.d(t,"PRODUCT_UPDATE_REQUEST",(function(){return l})),c.d(t,"PRODUCT_UPDATE_SUCCESS",(function(){return o})),c.d(t,"PRODUCT_UPDATE_FAIL",(function(){return j}));var r="PRODUCT_LIST_REQUEST",n="PRODUCT_LIST_SUCCESS",a="PRODUCT_LIST_FAIL",s="PRODUCT_DETAILS_REQUEST",i="PRODUCT_DETAILS_SUCCESS",d="PRODUCT_DETAILS_FAIL",l="PRODUCT_UPDATE_REQUEST",o="PRODUCT_UPDATE_SUCCESS",j="PRODUCT_UPDATE_FAIL"},59:function(e,t,c){},81:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),a=c(3),s=c(27),i=c.n(s),d=(c(59),c(4)),l=c(11),o=c(0);function j(e){var t=e.rating,c=e.numReviews;return Object(o.jsxs)("div",{className:"product-rating",children:[Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(o.jsx)("span",{children:c+"reviews"})]})}var u=c(23),b=c(5);function h(e){var t=e.product,c=e.url,n=Object(r.useState)(1),a=Object(b.a)(n,2),s=a[0],i=a[1];return Object(o.jsx)("div",{children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:"Price: "}),Object(o.jsxs)("div",{className:"price",children:["$",t.price]})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:"Status: "}),Object(o.jsx)("div",{className:"status",children:t.countInStock>0?Object(o.jsx)("span",{className:"success",children:"In Stock"}):Object(o.jsx)("span",{className:"error",children:"Unavailable"})})]})}),t.countInStock>0&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:"Qty"}),Object(o.jsx)("div",{children:Object(o.jsx)("select",{value:s,onChange:function(e){return i(e.target.value)},children:Object(u.a)(Array(t.countInStock).keys()).map((function(e){return Object(o.jsx)("option",{value:e+1,children:e+1},e+1)}))})})]})}),Object(o.jsx)("li",{children:Object(o.jsx)("button",{onClick:function(){c.history.push("/cart/".concat(t._id,"?qty=").concat(s))},className:"primary block",children:"Add"})})]})]})})}var p=c(6),O=c.n(p),x=c(10),m=c(9),f=c.n(m),v=c(21),g=function(){return function(){var e=Object(x.a)(O.a.mark((function e(t){var c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:v.PRODUCT_LIST_REQUEST}),e.prev=1,e.next=4,f.a.get("/api/products");case 4:c=e.sent,r=c.data,t({type:v.PRODUCT_LIST_SUCCESS,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:v.PRODUCT_LIST_FAIL,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(x.a)(O.a.mark((function t(c){var r,n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:v.PRODUCT_DETAILS_REQUEST,payload:e}),t.prev=1,t.next=4,f.a.get("/api/products/".concat(e));case 4:r=t.sent,n=r.data,c({type:v.PRODUCT_DETAILS_SUCCESS,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),c({type:v.PRODUCT_DETAILS_FAIL,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()};function S(e){return Object(o.jsx)("div",{className:"alert alert-".concat(e.variant||"info"),children:e.children})}function E(){return Object(o.jsx)("div",{className:"spinner-content",children:Object(o.jsx)("div",{className:"spinner"})})}function _(e){var t=Object(a.b)(),c=e.match.params.id,n=Object(a.c)((function(e){return e.productDetail})),s=n.loading,i=n.error,l=n.product;return Object(r.useEffect)((function(){t(y(c))}),[t,c]),Object(o.jsx)("div",{children:s?Object(o.jsx)(E,{}):i?Object(o.jsx)(S,{variant:"danger",children:i}):Object(o.jsxs)("div",{children:[Object(o.jsx)(d.c,{to:"/",children:"Back to result"}),Object(o.jsxs)("div",{className:"row top",children:[Object(o.jsx)("div",{className:"col-2",children:Object(o.jsx)("img",{className:"large",src:l.image,alt:l.name})}),Object(o.jsx)("div",{className:"col-1",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)("h1",{children:l.name})}),Object(o.jsx)("li",{children:Object(o.jsx)(j,{rating:l.rating,numReviews:l.numReviews})}),Object(o.jsxs)("li",{children:["Price : $",l.price]}),Object(o.jsxs)("li",{children:["Description : ",l.description]})]})}),Object(o.jsx)("div",{className:"col-1 card card-body",children:Object(o.jsx)(h,{url:e,product:l})})]})]})})}function N(e){var t=e.product;return Object(o.jsx)("div",{children:Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"product",children:[Object(o.jsx)("img",{className:"product-image",src:t.image,alt:t.name}),Object(o.jsx)("div",{className:"product-name",children:Object(o.jsx)(d.c,{to:"/product/".concat(t._id),children:t.name})}),Object(o.jsx)("div",{className:"product-brand",children:t.brand}),Object(o.jsx)(j,{rating:t.rating,numReviews:t.numReviews}),Object(o.jsxs)("div",{className:"product-price",children:["$",t.price]})]})},t._id)})}function C(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.productList})),c=t.loading,n=t.error,s=t.products;return Object(r.useEffect)((function(){e(g())}),[e]),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"home-brand col-1",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsxs)(d.c,{to:"/men",children:[Object(o.jsx)("img",{className:"brand-image",src:"images/home_page/brand-m.jpg",alt:"brand-men"}),Object(o.jsx)("span",{className:"brand-title-image-men",children:"Men"})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)(d.c,{to:"/woman",children:[Object(o.jsx)("img",{className:"brand-image",src:"images/home_page/brand-w.jpg",alt:"brand-women"}),Object(o.jsx)("span",{className:"brand-title-image-woman",children:"Woman"})]})})]})}),Object(o.jsx)("div",{className:"home-list col-2",children:c?Object(o.jsx)(E,{}):n?Object(o.jsx)(S,{variant:"danger",children:n}):Object(o.jsx)("ul",{className:"products",children:s.map((function(e){return Object(o.jsx)(N,{product:e},e._id)}))})})]})}var I="CART_ADD_ITEM",T="CARD_REMOVE_ITEM",P="CART_SAVE_SHIPPING_ADDRESS",R="CART_SAVE_PAYMENT_METHOD",A="CART_EMPTY",D=function(e,t){return function(){var c=Object(x.a)(O.a.mark((function c(r,n){var a,s;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,f.a.get("/api/products/".concat(e));case 2:a=c.sent,s=a.data,r({type:I,payload:{name:s.name,image:s.image,price:s.price,countInStock:s.countInStock,product:s._id,qty:t}}),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems));case 6:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}()};function w(e){var t=Object(a.b)(),c=e.match.params.id,n=e.location.search?Number(e.location.search.split("=")[1]):1;Object(r.useEffect)((function(){c&&t(D(c,n))}),[t,c,n]);var s=Object(a.c)((function(e){return e.cart})).cartItems;return Object(o.jsx)("div",{children:s.length>0?Object(o.jsxs)("div",{className:"shopping",children:[Object(o.jsx)("span",{className:"title-cart",children:"Shopping cart"}),Object(o.jsxs)("div",{className:"shopping-content",children:[Object(o.jsx)("div",{className:" col-2",children:Object(o.jsxs)("table",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Products"}),Object(o.jsx)("th",{children:"Price"}),Object(o.jsx)("th",{children:"Count"})]}),s.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsxs)("td",{children:[Object(o.jsx)("img",{src:e.image,className:"image-cart",alt:e.name}),Object(o.jsxs)("div",{className:"details-cart",children:[Object(o.jsxs)(d.c,{to:"/product/".concat(e.product),children:[" ",e.name," "]})," ",Object(o.jsx)("br",{}),Object(o.jsx)("span",{children:"Talla: M"})]})]}),Object(o.jsx)("td",{children:Object(o.jsxs)("div",{className:"price-cart",children:["$",e.price]})}),Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"qty-cart",children:Object(o.jsx)("select",{value:e.qty,onChange:function(c){return t(D(e.product,Number(c.target.value)))},children:Object(u.a)(Array(e.countInStock).keys()).map((function(e){return Object(o.jsx)("option",{value:e+1,children:e+1},e+1)}))})})})]})}))]})}),Object(o.jsx)("div",{className:"col-1",children:Object(o.jsx)("div",{className:"card card-body",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsxs)("h4",{children:["Subtotal (",s.reduce((function(e,t){return e+t.qty}),0)," items): $",s.reduce((function(e,t){return e+t.price*t.qty}),0)]})}),Object(o.jsx)("li",{children:Object(o.jsx)("button",{type:"button",onClick:function(){e.history.push("/signin?redirect=shipping")},className:"primary block",disabled:0===s.length,children:"Proceed to Checkout"})})]})})})]})]}):Object(o.jsxs)(S,{children:["Cart is empty ",Object(o.jsx)(d.c,{to:"/",children:"Go to shopping"})]})})}var U=c(8),k="USER_SIGIN_REQUEST",F="USER_SIGIN_SUCCESS",L="USER_SIGIN_FAIL",q="USER_SIGIN_SIGNOUT",M="USER_REGISTER_REQUEST",Q="USER_REGISTER_FAIL",B="USER_UPDATE_REQUEST",$="USER_UPDATE_SUCCESS",Y="USER_UPDATE_FAIL";function G(e){var t=Object(r.useState)(""),c=Object(b.a)(t,2),n=c[0],s=c[1],i=Object(r.useState)(""),l=Object(b.a)(i,2),j=l[0],u=l[1],h=e.location.search?e.location.search.split("=")[1]:"/",p=Object(a.c)((function(e){return e.userSignin})),m=p.userInfo,v=p.loading,g=p.error,y=Object(a.b)();return Object(r.useEffect)((function(){m&&e.history.push(h)}),[e.history,h,m]),Object(o.jsxs)("div",{children:[v&&Object(o.jsx)(E,{}),g&&Object(o.jsx)(S,{variant:"danger",children:g}),Object(o.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),y(function(e,t){return function(){var c=Object(x.a)(O.a.mark((function c(r){var n,a;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r({type:k,payload:{email:e,password:t}}),c.prev=1,c.next=4,f.a.post("api/users/signin",{email:e,password:t});case 4:n=c.sent,a=n.data,r({type:F,payload:a}),localStorage.setItem("userInfo",JSON.stringify(a)),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),r({type:L,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.response});case 13:case"end":return c.stop()}}),c,null,[[1,10]])})));return function(e){return c.apply(this,arguments)}}()}(n,j))},children:[Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Sign In"})}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(o.jsx)("input",{type:"email",id:"email",placeholder:"Enter email",required:!0,onChange:function(e){return s(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"password",children:"Password"}),Object(o.jsx)("input",{type:"password",id:"password",placeholder:"Enter password",required:!0,onChange:function(e){return u(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{}),Object(o.jsx)("button",{className:"primary",type:"submit",children:"Sign In"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{}),Object(o.jsxs)("div",{children:["New customer? "," ",Object(o.jsx)(d.c,{to:"/register",children:"Create your account"})]})]})]})]})}function J(e){var t=Object(r.useState)(""),c=Object(b.a)(t,2),n=c[0],s=c[1],i=Object(r.useState)(""),l=Object(b.a)(i,2),j=l[0],u=l[1],h=Object(r.useState)(""),p=Object(b.a)(h,2),m=p[0],v=p[1],g=Object(r.useState)(""),y=Object(b.a)(g,2),_=y[0],N=y[1],C=e.location.search?e.location.search.split("=")[1]:"/",I=Object(a.c)((function(e){return e.userRegister})),T=I.userInfo,P=I.loading,R=I.error,A=Object(a.b)();return Object(r.useEffect)((function(){T&&e.history.push(C)}),[e.history,C,T]),Object(o.jsx)("div",{children:Object(o.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),_!==m?alert("Password not match"):A(function(e,t,c){return function(){var r=Object(x.a)(O.a.mark((function r(n){var a,s;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:M,payload:{name:e,email:t,password:c}}),r.prev=1,r.next=4,f.a.post("api/users/register",{name:e,email:t,password:c});case 4:a=r.sent,s=a.data,n({type:"USER_REGISTER_SUCCESS",payload:s}),n({type:F,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),n({type:Q,payload:r.t0.response&&r.t0.response.data.message?r.t0.response.data.message:r.t0.response});case 14:case"end":return r.stop()}}),r,null,[[1,11]])})));return function(e){return r.apply(this,arguments)}}()}(n,j,m))},children:[Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Register"})}),P&&Object(o.jsx)(E,{}),R&&Object(o.jsx)(S,{variant:"danger",children:R}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(o.jsx)("input",{type:"email",id:"email",placeholder:"Enter email",required:!0,onChange:function(e){return u(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"name",children:"Name"}),Object(o.jsx)("input",{type:"text",id:"name",placeholder:"Enter name",required:!0,onChange:function(e){return s(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"password",children:"Password"}),Object(o.jsx)("input",{type:"password",id:"password",placeholder:"Enter password",required:!0,onChange:function(e){return v(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"confirmPassword",children:"Password"}),Object(o.jsx)("input",{type:"password",id:"confirmPasswords",placeholder:"Confirm password",required:!0,onChange:function(e){return N(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{}),Object(o.jsx)("button",{className:"primary",type:"submit",children:"Register"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{}),Object(o.jsxs)("div",{children:["Already have an account?",Object(o.jsx)(d.c,{to:"/signin?redirect=".concat(C),children:"Sign in"})]})]})]})})}var z=c(98),H=c(102),V=c(100),K=c(101),X=["Sign in","Shipping address","Payment","Review your order"];function W(e){var t=n.a.useState(1),c=Object(b.a)(t,2),a=c[0],s=c[1];return Object(r.useEffect)((function(){s(e.step)}),[a,e]),Object(o.jsx)(n.a.Fragment,{children:Object(o.jsx)("main",{children:Object(o.jsx)(z.a,{className:"",children:Object(o.jsx)(H.a,{activeStep:a,children:X.map((function(e){return Object(o.jsx)(V.a,{children:Object(o.jsx)(K.a,{children:e})},e)}))})})})})}function Z(e){var t=Object(a.c)((function(e){return e.userSignin})).userInfo,c=Object(a.c)((function(e){return e.cart})).shippingAddress;t||e.history.push("/signin");var n=Object(r.useState)(c.fullName),s=Object(b.a)(n,2),i=s[0],d=s[1],l=Object(r.useState)(c.address),j=Object(b.a)(l,2),u=j[0],h=j[1],p=Object(r.useState)(c.city),O=Object(b.a)(p,2),x=O[0],m=O[1],f=Object(r.useState)(c.postalCode),v=Object(b.a)(f,2),g=v[0],y=v[1],S=Object(r.useState)(c.country),E=Object(b.a)(S,2),_=E[0],N=E[1],C=Object(a.b)();return Object(o.jsxs)("div",{children:[Object(o.jsx)(W,{step:"2"}),Object(o.jsxs)("form",{className:"form",onSubmit:function(t){var c;t.preventDefault(),C((c={fullName:i,address:u,city:x,postalCode:g,country:_},function(e){e({type:P,payload:c}),localStorage.setItem("shippingAddress",JSON.stringify(c))})),e.history.push("/payment")},children:[Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Shipping Address"})}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"fullName"}),Object(o.jsx)("input",{type:"text",id:"fullName",placeholder:"Enter full name",value:i,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"address"}),Object(o.jsx)("input",{type:"text",id:"address",placeholder:"Enter address",value:u,onChange:function(e){return h(e.target.value)},required:!0})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"city"}),Object(o.jsx)("input",{type:"text",id:"city",placeholder:"Enter city",value:x,onChange:function(e){return m(e.target.value)},required:!0})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"postalCode"}),Object(o.jsx)("input",{type:"text",id:"postalCode",placeholder:"Enter postal code",value:g,onChange:function(e){return y(e.target.value)},required:!0})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"country"}),Object(o.jsx)("input",{type:"text",id:"country",placeholder:"Enter country",value:_,onChange:function(e){return N(e.target.value)},required:!0})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{}),Object(o.jsx)("button",{className:"primary",type:"submit",children:"Continue"})]})]})]})}function ee(e){var t=Object(r.useState)("Paypal"),c=Object(b.a)(t,2),n=c[0],s=c[1],i=Object(a.b)();Object(a.c)((function(e){return e.cart})).shippingAddress.address||e.history.push("/shipping");return Object(o.jsxs)("div",{children:[Object(o.jsx)(W,{step:"3"}),Object(o.jsxs)("form",{className:"form",onSubmit:function(t){var c;t.preventDefault(),i((c=n,function(e){e({type:R,payload:c})})),e.history.push("/placeorder")},children:[Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Payment Method"})}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("input",{type:"radio",id:"paypal",value:"PayPal",name:"paymentMethod",required:!0,checked:!0,onChange:function(e){return s(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"paypal",children:"Paypal"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("input",{type:"radio",id:"creditCard",value:"Creditcard",name:"paymentMethod",required:!0,onChange:function(e){return s(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"Creditcard",children:"Tarjeta de credito"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("input",{type:"radio",id:"pse",value:"pse",name:"paymentMethod",required:!0,onChange:function(e){return s(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"pse",children:"PSE"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{}),Object(o.jsx)("button",{className:"primary block",type:"submit",children:"Continue"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{}),Object(o.jsx)("button",{className:"secundary block",type:"button",onClick:function(){return e.history.push("/shipping")},children:"back"})]})]})]})]})}var te="ORDER_CREATE_REQUEST",ce="ORDER_CREATE_SUCCESS",re="ORDER_CREATE_FAIL",ne="ORDER_CREATE_RESET",ae="ORDER_DETAIL_REQUEST",se="ORDER_DETAIL_SUCCESS",ie="ORDER_DETAIL_FAIL",de="ORDER_PAY_REQUEST",le="ORDER_PAY_SUCCESS",oe="ORDER_PAY_FAIL",je="ORDER_PAY_RESET",ue="ORDER_HISTORY_REQUEST",be="ORDER_HISTORY_SUCCESS",he="ORDER_HISTORY_FAIL",pe="ORDER_DELETE_REQUEST",Oe="ORDER_DELETE_FAIL",xe="ORDER_LIST_ADMIN_REQUEST",me="ORDER_LIST_ADMIN_SUCCESS",fe="ORDER_LIST_ADMIN_FAIL";function ve(e){var t=Object(a.b)(""),c=Object(a.c)((function(e){return e.cart})),n=Object(a.c)((function(e){return e.createOrder})),s=n.loading,i=n.success,l=n.error,j=n.order;c.paymentMethod||e.history.push("/payment");var b=function(e){return Number(e.toFixed(2))};c.itemsPrice=b(c.cartItems.reduce((function(e,t){return e+t.qty*t.price}),0)),c.shippingPrice=c.itemsPrice>100?b(0):b(10),c.taxPrice=b(.15*c.itemsPrice),c.totalPrice=c.itemsPrice+c.shippingPrice+c.taxPrice;return Object(r.useEffect)((function(){i&&(e.history.push("/order/".concat(j._id)),t({type:ne}))}),[t,e.history,j,i]),Object(o.jsxs)("div",{children:[Object(o.jsx)(W,{step:"4"}),Object(o.jsxs)("div",{className:"row top",children:[Object(o.jsx)("div",{className:"col-2",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"card card-body",children:[Object(o.jsx)("h2",{children:"Shipping"}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Name: "}),c.shippingAddress.fullName," ",Object(o.jsx)("br",{}),Object(o.jsx)("strong",{children:"Address: "})," ",c.shippingAddress.address,",",c.shippingAddress.city,", ",c.shippingAddress.postalCode,",",c.shippingAddress.country]})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"card card-body",children:[Object(o.jsx)("h2",{children:"Payment"}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Method: "}),c.paymentMethod," ",Object(o.jsx)("br",{})]})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"card card-body",children:[Object(o.jsx)("h2",{children:"Order items"}),Object(o.jsx)("div",{className:"shopping-cart",children:c.cartItems.map((function(e){return Object(o.jsxs)("div",{className:"products-cart",children:[Object(o.jsx)("img",{src:e.image,className:"image-cart",alt:e.name}),Object(o.jsx)("div",{className:"name-cart",children:Object(o.jsxs)(d.c,{to:"/product/".concat(e.product),children:[" ",e.name," "]})}),Object(o.jsx)("div",{className:"qty-cart",children:Object(o.jsx)("select",{value:e.qty,onChange:function(c){return t(D(e.product,Number(c.target.value)))},children:Object(u.a)(Array(e.countInStock).keys()).map((function(e){return Object(o.jsx)("option",{value:e+1,children:e+1},e+1)}))})}),Object(o.jsxs)("div",{className:"price-cart",children:[e.qty," x $",e.price," = $",e.qty*e.price]})]},e.product)}))})]})})]})}),Object(o.jsx)("div",{className:"col-1",children:Object(o.jsx)("div",{className:"card card-body",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)("h2",{children:"Order summary"})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:"Items"}),Object(o.jsxs)("div",{children:["$",c.itemsPrice.toFixed(2)]})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:"Shipping"}),Object(o.jsxs)("div",{children:["$",c.shippingPrice.toFixed(2)]})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:"Tax"}),Object(o.jsxs)("div",{children:["$",c.taxPrice.toFixed(2)]})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:Object(o.jsx)("strong",{children:"Total"})}),Object(o.jsx)("div",{children:Object(o.jsxs)("strong",{children:["$",c.totalPrice.toFixed(2)]})})]})}),Object(o.jsx)("li",{children:Object(o.jsx)("button",{type:"button",onClick:function(e){t(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(c,r){var n,a,s,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:te,payload:e}),t.prev=1,n=r(),a=n.userSignin.userInfo,t.next=5,f.a.post("/api/orders",e,{headers:{Authorization:"Bearer ".concat(a.token)}});case 5:s=t.sent,i=s.data,c({type:ce,payload:i.order}),c({type:A,payload:i.order}),localStorage.removeItem("cartItems"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c({type:re,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,c){return t.apply(this,arguments)}}()}(Object(U.a)(Object(U.a)({},c),{},{orderItems:c.cartItems})))},disabled:0===c.cartItems.length,className:"primary block",children:"Place order"})}),Object(o.jsx)("li",{children:Object(o.jsx)("button",{className:"secundary block",type:"button",onClick:function(){return e.history.push("/payment")},children:"back"})}),s&&Object(o.jsx)(E,{}),l&&Object(o.jsx)(S,{variant:"danger",children:l})]})})})]})]})}var ge=c(47),ye="BANKS_PAYU_LIST_REQUEST",Se="BANKS_PAYU_LIST_SUCCESS",Ee="BANKS_PAYU_LIST_FAIL",_e="PSE_PAYU_SUBMIT_TRANSACTION_REQUEST",Ne="PSE_PAYU_SUBMIT_TRANSACTION_SUCCESS",Ce="PSE_PAYU_SUBMIT_TRANSACTION_FAIL";function Ie(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.banksList})),c=t.data,n=t.loading,s=t.error,i=Object(a.c)((function(e){return e.registerPayment})),d=i.pseTransaction,l=i.loading,j=Object(r.useState)(""),u=Object(b.a)(j,2),h=u[0],p=u[1],m=Object(r.useState)(""),v=Object(b.a)(m,2),g=v[0],y=v[1],_=Object(r.useState)("N"),N=Object(b.a)(_,2),C=N[0],I=N[1],T=Object(r.useState)(""),P=Object(b.a)(T,2),R=P[0],A=P[1],D=Object(r.useState)("CC"),w=Object(b.a)(D,2),U=w[0],k=w[1],F=Object(r.useState)(""),L=Object(b.a)(F,2),q=L[0],M=L[1];return Object(r.useEffect)((function(){e(function(){var e=Object(x.a)(O.a.mark((function e(t){var c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ye}),e.prev=1,e.next=4,f.a.get("/api/payment/payu/getBanks");case 4:c=e.sent,r=c.data,t({type:Se,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:Ee,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e],l,d),Object(o.jsx)("div",{children:n?Object(o.jsx)(E,{}):s?Object(o.jsx)(S,{variant:"danger",children:s}):Object(o.jsxs)("form",{className:"form",onSubmit:function(t){var c;t.preventDefault(),e((c={bank:h,name:g,typeClient:C,identification:R,typeIdentification:U,phone:q},function(){var e=Object(x.a)(O.a.mark((function e(t,r){var n,a,s,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:_e}),n=r(),a=n.orderDetails.order,e.prev=2,e.next=5,f.a.post("/api/payment/payu/pse/submit",{dataTransaction:c,order:a});case 5:s=e.sent,i=s.data,t({type:Ne,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:Ce,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,c){return e.apply(this,arguments)}}()))},children:[Object(o.jsx)("div",{children:Object(o.jsx)("h2",{children:"Pago PSE"})}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"bank",children:"Bank"}),Object(o.jsx)("select",{id:"bank",onChange:function(e){return p(e.target.value)},children:c.banks.map((function(e){return Object(o.jsx)("option",{value:e.id,children:e.description})}))})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"name",children:"Name"}),Object(o.jsx)("input",{type:"text",id:"name",placeholder:"Enter name",required:!0,onChange:function(e){return y(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"typeClient",children:"Type of client"}),Object(o.jsxs)("select",{id:"typeClient",onChange:function(e){return I(e.target.value)},children:[Object(o.jsx)("option",{value:"N",children:"Persona natural"}),Object(o.jsx)("option",{value:"J",children:"Persona juridica"})]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"typeIdentification",children:"Type document"}),Object(o.jsxs)("select",{id:"typeClient",onChange:function(e){return k(e.target.value)},children:[Object(o.jsx)("option",{value:"CC",children:"C\xe9dula de ciudadan\xeda"}),Object(o.jsx)("option",{value:"CE",children:"C\xe9dula de extranjer\xeda"}),Object(o.jsx)("option",{value:"NIT",children:"N\xfamero de Identificaci\xf3n Tributario"}),Object(o.jsx)("option",{value:"TI",children:"Tarjeta de Identidad"}),Object(o.jsx)("option",{value:"PP",children:"Pasaporte"})]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"identification",children:"Document"}),Object(o.jsx)("input",{type:"text",id:"identification",placeholder:"Enter number identification",required:!0,onChange:function(e){return A(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"phone",children:"Phone number"}),Object(o.jsx)("input",{type:"number",id:"phone",placeholder:"Enter Phone number",required:!0,onChange:function(e){return M(e.target.value)}})]}),Object(o.jsx)("div",{children:l?Object(o.jsx)(E,{}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{}),Object(o.jsx)("button",{className:"primary",type:"submit",children:"Continue"})]})})]})})}function Te(e){var t=e.match.params.id,c=Object(r.useState)(!1),n=Object(b.a)(c,2),s=n[0],i=n[1],l=Object(r.useState)(!1),j=Object(b.a)(l,2),u=j[0],h=j[1],p=Object(a.c)((function(e){return e.orderDetails})),m=p.order,v=p.loading,g=p.error,y=Object(a.c)((function(e){return e.orderDelete})).success,_=Object(a.c)((function(e){return e.payOrder})).success,N=Object(a.b)("");Object(r.useEffect)((function(){var e=function(){var e=Object(x.a)(O.a.mark((function e(){var t,c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/config/paypal");case 2:t=e.sent,c=t.data,(r=document.createElement("script")).type="text/javascript",r.src="https://www.paypal.com/sdk/js?client-id=".concat(c),r.async=!0,r.onload=function(){i(!0)},document.body.appendChild(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(x.a)(O.a.mark((function e(){var t,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/payment/mercado-pago/preference",{preference:{items:[{title:"Mi producto",unit_price:100,quantity:1}]}});case 2:t=e.sent,c=t.data,new window.MercadoPago("TEST-8880b620-b177-4bb3-b649-682bba3be44c",{locale:"es-CO"}).checkout({preference:{id:c},render:{container:".cho-container",label:"Pagar"}});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();_&&N({type:je}),N(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(c,r){var n,a,s,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:ae,payload:e}),n=r(),a=n.userSignin.userInfo,t.prev=2,t.next=5,f.a.get("/api/orders/".concat(e),{headers:{Authorization:"Bearer ".concat(a.token)}});case 5:s=t.sent,i=s.data,c({type:se,payload:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),c({type:ie,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,c){return t.apply(this,arguments)}}()}(t)),window.MercadoPago?(c(),h(!0)):function(){var e=document.createElement("script");e.type="text/javascript",e.src="https://sdk.mercadopago.com/js/v2",e.async=!0,e.onload=function(){h(!0),c()},document.body.appendChild(e)}(),window.paypal?i(!0):e()}),[N,t,_]);var C=function(){N(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(c,r){var n,a,s,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:pe}),n=r(),a=n.userSignin.userInfo,t.prev=2,t.next=5,f.a.delete("/api/orders/".concat(e),{headers:{Authorization:"Bearer ".concat(a.token)}});case 5:s=t.sent,i=s.data,c({type:"ORDER_DELETE_SUCCESS",payload:i.deleteCount}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),c({type:he,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,c){return t.apply(this,arguments)}}()}(t)),y&&e.history.push("/orderhistory")};return v||void 0===m?Object(o.jsx)(E,{}):g?Object(o.jsx)(S,{variant:"danger",children:g}):Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"row top",children:[Object(o.jsx)("div",{className:"col-2",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"card card-body",children:[Object(o.jsxs)("h3",{children:["Order: ",m._id]}),!m.isPaid&&Object(o.jsx)("button",{className:"danger",onClick:function(){return C()},children:"Delete order"})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"card card-body",children:[Object(o.jsx)("h3",{children:"Shipping"}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Name: "}),m.shippingAddress.fullName," ",Object(o.jsx)("br",{}),Object(o.jsx)("strong",{children:"Address: "})," ",m.shippingAddress.address,",",m.shippingAddress.city,", ",m.shippingAddress.postalCode,",",m.shippingAddress.country]}),m.isDelivered?Object(o.jsxs)(S,{variant:"success",children:["Delivered at: ",m.deliveredAt.split("T")[0]]}):Object(o.jsx)(S,{variant:"danger",children:"Not delivered"})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"card card-body",children:[Object(o.jsx)("h3",{children:"Payment"}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Method: "}),m.paymentMethod," ",Object(o.jsx)("br",{})]}),m.isPaid?Object(o.jsxs)(S,{variant:"success",children:["Paid at: ",m.paidAt.split("T")[0]]}):Object(o.jsx)(S,{variant:"danger",children:"Not Paid"})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"card card-body",children:[Object(o.jsx)("h3",{children:"Order items"}),Object(o.jsx)("div",{className:"shopping-cart",children:m.orderItems.map((function(e){return Object(o.jsxs)("div",{className:"products-cart",children:[Object(o.jsx)("img",{src:e.image,className:"image-cart",alt:e.name}),Object(o.jsx)("div",{className:"name-cart",children:Object(o.jsxs)(d.c,{to:"/product/".concat(e.product),children:[" ",e.name," "]})}),Object(o.jsxs)("div",{className:"price-cart",children:[e.qty," x $",e.price," = $",e.qty*e.price]})]},e.product)}))})]})})]})}),Object(o.jsx)("div",{className:"col-1",children:Object(o.jsx)("div",{className:"card card-body",children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)("h3",{children:"Order summary"})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:"Items"}),Object(o.jsxs)("div",{children:["$",m.itemsPrice.toFixed(2)]})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:"Shipping"}),Object(o.jsxs)("div",{children:["$",m.shippingPrice.toFixed(2)]})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:"Tax"}),Object(o.jsxs)("div",{children:["$",m.taxPrice.toFixed(2)]})]})}),Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{children:Object(o.jsx)("strong",{children:"Total"})}),Object(o.jsx)("div",{children:Object(o.jsxs)("strong",{children:["$",m.totalPrice.toFixed(2)]})})]})}),!m.isPaid&&Object(o.jsx)(o.Fragment,{children:"Paypal"===m.paymentMethod?Object(o.jsx)("li",{children:s?Object(o.jsx)(ge.PayPalButton,{amount:m.totalPrice,onSuccess:function(e){N(function(e,t){return function(){var c=Object(x.a)(O.a.mark((function c(r,n){var a,s,i,d;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r({type:de}),a=n(),s=a.userSignin.userInfo,c.prev=2,c.next=5,f.a.put("/api/orders/".concat(e._id,"/pay"),t,{headers:{Authorization:"Bearer ".concat(s.token)}});case 5:i=c.sent,d=i.data,r({type:le,payload:d}),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),r({type:oe,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e,t){return c.apply(this,arguments)}}()}(m,e))},onError:function(e){}}):Object(o.jsx)(E,{})}):"pse"===m.paymentMethod?Object(o.jsx)("li",{children:Object(o.jsx)(Ie,{})}):Object(o.jsx)("li",{children:u?Object(o.jsx)("div",{className:"cho-container"}):Object(o.jsx)(E,{})})})]})})})]})})}function Pe(e){var t=Object(a.b)(),c=Object(a.c)((function(e){return e.orderDelete})).success,n=Object(a.c)((function(e){return e.orderHistory})),s=n.orders,i=n.error,l=n.loading;return Object(a.c)((function(e){return e.userSignin})).userInfo||e.history.push("/"),Object(r.useEffect)((function(){t(function(){var e=Object(x.a)(O.a.mark((function e(t,c){var r,n,a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ue}),e.prev=1,r=c(),n=r.userSignin.userInfo,e.next=5,f.a.post("/api/orders/list",{id:n._id,isAdmin:n.isAdmin},{headers:{Authorization:"Bearer ".concat(n.token)}});case 5:a=e.sent,s=a.data,t({type:be,payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({type:he,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,c){return e.apply(this,arguments)}}())}),[t,c]),Object(o.jsx)("div",{children:l?Object(o.jsx)(E,{}):i?Object(o.jsx)(S,{variant:"danger",children:i}):0===s.length?Object(o.jsxs)(S,{variant:"danger",children:["No orders yet. ",Object(o.jsx)(d.c,{to:"/",children:" Go to shopping"})]}):Object(o.jsxs)("div",{className:"table-content",children:[Object(o.jsx)("h2",{children:"Order history"}),Object(o.jsxs)("table",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Id"}),Object(o.jsx)("th",{children:"Date"}),Object(o.jsx)("th",{children:"Total"}),Object(o.jsx)("th",{children:"Paid"}),Object(o.jsx)("th",{children:"Delivered"}),Object(o.jsx)("th",{children:"Actions"})]}),s.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e._id}),Object(o.jsxs)("td",{children:[e.createdAt.split("T")[0]," ",e.createdAt.split("T")[1]]}),Object(o.jsxs)("td",{children:["$",e.totalPrice.toFixed(2)]}),Object(o.jsx)("td",{children:e.isPaid?Object(o.jsx)("span",{className:"success",children:"Si"}):"No"}),Object(o.jsx)("td",{children:e.isDelivered?Object(o.jsx)("span",{className:"success",children:"Si"}):"No"}),Object(o.jsxs)("td",{children:[" ",Object(o.jsx)(d.c,{to:"/order/".concat(e._id),children:"Details"})]})]})})),Object(o.jsx)("tr",{})]})]})})}var Re=c(36),Ae=c.n(Re);function De(e){var t=Object(a.b)(),c=e.data,n=c.user,s=c.form,i=Object(r.useState)(n.name),d=Object(b.a)(i,2),l=d[0],j=d[1],u=Object(r.useState)(n.email),h=Object(b.a)(u,2),p=h[0],m=h[1],v=Object(r.useState)(""),g=Object(b.a)(v,2),y=g[0],S=g[1],E=Object(r.useState)(""),_=Object(b.a)(E,2),N=_[0],C=_[1];return Object(o.jsx)("div",{children:Object(o.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),y!==N?Ae()({text:"passwords not match",icon:"error"}):(t(function(e){return function(){var t=Object(x.a)(O.a.mark((function t(c,r){var n,a,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:B,payload:e}),t.prev=1,t.next=4,f.a.put("api/users/update/".concat(e._id),e,{headers:{Authorization:"Bearer ".concat(e.token)}});case 4:n=t.sent,a=n.data,s=Object(U.a)(Object(U.a)({},e),{},{name:a.user.name,email:a.user.email}),c({type:$,payload:s}),c({type:F,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c({type:Y,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.response});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,c){return t.apply(this,arguments)}}()}(Object(U.a)(Object(U.a)({},n),{},{name:l,email:p,password:y}))),S(""),C(""),Ae()({text:"Profile updated",icon:"success"}))},children:[Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:s.title})}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(o.jsx)("input",{type:"email",id:"email",value:p,placeholder:"Enter email",required:!0,onChange:function(e){return m(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"name",children:"Name"}),Object(o.jsx)("input",{type:"text",id:"name",value:l,placeholder:"Enter name",required:!0,onChange:function(e){return j(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"password",children:"Password"}),Object(o.jsx)("input",{type:"password",id:"password",placeholder:"Enter password",required:!0,onChange:function(e){return S(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"confirmPassword",children:"Password"}),Object(o.jsx)("input",{type:"password",id:"confirmPasswords",placeholder:"Confirm password",required:!0,onChange:function(e){return C(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{}),Object(o.jsx)("button",{className:"primary",type:"submit",children:s.button})]})]})})}function we(e){var t=Object(a.c)((function(e){return e.userSignin})).userInfo;return t||e.history.push("/signin"),Object(o.jsx)("div",{children:Object(o.jsx)(De,{data:{user:t,form:{title:"Update profile",button:"update"}}})})}var Ue=c(31),ke=["component"];function Fe(e){var t=e.component,c=Object(Ue.a)(e,ke),r=Object(a.c)((function(e){return e.userSignin})).userInfo;return Object(o.jsx)(l.b,Object(U.a)(Object(U.a)({},c),{},{render:function(e){return r?Object(o.jsx)(t,Object(U.a)({},e)):Object(o.jsx)(l.a,{to:"/signin"})}}))}function Le(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.cart})).cartItems,c=Object(a.c)((function(e){return e.userSignin})).userInfo;return Object(o.jsxs)("header",{className:"header",children:[Object(o.jsxs)("div",{className:"brand",children:[Object(o.jsx)("button",{children:"\u2630"}),Object(o.jsx)(d.c,{to:"/",children:"S "})]}),Object(o.jsxs)("div",{className:"header-links",children:[Object(o.jsxs)(d.c,{to:"/cart",children:[Object(o.jsx)("i",{className:"fas fa-shopping-cart"}),t.length>0&&Object(o.jsxs)("span",{className:"badge",children:[" ",t.length," "]})]}),c&&c.isAdmin&&Object(o.jsxs)("div",{className:"dropdown",children:[Object(o.jsxs)(d.c,{to:"#",children:[Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:"fas fa-users-cog"})}),Object(o.jsx)("span",{children:"Admin"}),Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:"fa fa-caret-down"})})]}),Object(o.jsxs)("ul",{className:"dropdown-content",children:[Object(o.jsx)("li",{children:Object(o.jsx)(d.c,{to:"/admin/dashboard",children:"Dashboard"})}),Object(o.jsx)("li",{children:Object(o.jsx)(d.c,{to:"/admin/products",children:"Products"})}),Object(o.jsx)("li",{children:Object(o.jsx)(d.c,{to:"/admin/orders",children:"Orders"})}),Object(o.jsx)("li",{children:Object(o.jsx)(d.c,{to:"/admin/users",children:"Users"})})]})]}),c?Object(o.jsxs)("div",{className:"dropdown",children:[Object(o.jsxs)(d.c,{to:"#",children:[Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:"fas fa-user"})}),Object(o.jsx)("span",{children:c.name}),Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:"fa fa-caret-down"})})]}),Object(o.jsxs)("ul",{className:"dropdown-content",children:[Object(o.jsx)("li",{children:Object(o.jsx)(d.c,{to:"/profile",children:"Profile"})}),Object(o.jsx)("li",{children:Object(o.jsx)(d.c,{to:"/orderhistory",children:"Order history"})}),Object(o.jsx)("li",{children:Object(o.jsx)(d.c,{to:"#signout",onClick:function(){return e(function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("userInfo"),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),t({type:q});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(o.jsx)(l.a,{to:"/"})},children:"Signout"})})]})]}):Object(o.jsxs)(d.c,{to:"/signin",children:[Object(o.jsx)("span",{children:Object(o.jsx)("i",{className:"fas fa-user"})}),Object(o.jsx)("span",{children:"Sign In"})]})]})]})}function qe(){return Object(o.jsx)("footer",{className:"footer",children:"All right reserved."})}function Me(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.listOrders})),c=t.orders,n=t.loading,s=t.error;return Object(r.useEffect)((function(){e(function(){var e=Object(x.a)(O.a.mark((function e(t,c){var r,n,a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:xe}),r=c(),n=r.userSignin.userInfo,e.prev=2,e.next=5,f.a.post("/api/orders/list/all",{id:n._id,isAdmin:n.isAdmin},{headers:{Authorization:"Bearer ".concat(n.token)}});case 5:a=e.sent,s=a.data,t({type:me,payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:fe,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,c){return e.apply(this,arguments)}}())}),[e]),Object(o.jsx)("div",{children:n?Object(o.jsx)(E,{}):s?Object(o.jsx)(S,{variant:"danger",children:s}):Object(o.jsxs)("div",{className:"table-content",children:[Object(o.jsx)("h2",{children:"Order list"}),Object(o.jsxs)("table",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Id"}),Object(o.jsx)("th",{children:"Date"}),Object(o.jsx)("th",{children:"Total"}),Object(o.jsx)("th",{children:"Paid"}),Object(o.jsx)("th",{children:"Delivered"}),Object(o.jsx)("th",{children:"Actions"})]}),c.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e._id}),Object(o.jsxs)("td",{children:[e.createdAt.split("T")[0]," ",e.createdAt.split("T")[1]]}),Object(o.jsxs)("td",{children:["$",e.totalPrice.toFixed(2)]}),Object(o.jsx)("td",{children:e.isPaid?Object(o.jsx)("span",{className:"success",children:"Si"}):"No"}),Object(o.jsx)("td",{children:e.isDelivered?Object(o.jsx)("span",{className:"success",children:"Si"}):Object(o.jsxs)("span",{children:["No",Object(o.jsx)("button",{className:"button",children:"Deliver"})]})}),Object(o.jsxs)("td",{children:[" ",Object(o.jsx)(d.c,{to:"/order/".concat(e._id),children:"Details"})]})]})})),Object(o.jsx)("tr",{})]})]})})}var Qe=["component"];function Be(e){var t=e.component,c=Object(Ue.a)(e,Qe),r=Object(a.c)((function(e){return e.userSignin})).userInfo;return Object(o.jsx)(l.b,Object(U.a)(Object(U.a)({},c),{},{render:function(e){return void 0!==r&&r.isAdmin?Object(o.jsx)(t,Object(U.a)({},e)):Object(o.jsx)(l.a,{to:"/"})}}))}function $e(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.productList})),c=t.products,n=t.loading,s=t.error;return Object(r.useEffect)((function(){e(g())}),[e]),Object(o.jsx)("div",{children:n?Object(o.jsx)(E,{}):s?Object(o.jsx)(S,{variant:"danger",children:s}):Object(o.jsxs)("div",{className:"table-content",children:[Object(o.jsx)("h2",{children:"Products list"}),Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Brand"}),Object(o.jsx)("th",{children:"Name"}),Object(o.jsx)("th",{children:"Category"}),Object(o.jsx)("th",{children:"Price"}),Object(o.jsx)("th",{children:"In stock"}),Object(o.jsx)("th",{children:"Rating"}),Object(o.jsx)("th",{children:"Reviews"}),Object(o.jsx)("th",{children:"Description"}),Object(o.jsx)("th",{children:"Created at"}),Object(o.jsx)("th",{children:"Updated at"}),Object(o.jsx)("th",{children:"Actions"}),Object(o.jsx)("th",{children:"Details"})]})}),Object(o.jsx)("tbody",{children:c.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.brand}),Object(o.jsx)("td",{children:e.name}),Object(o.jsx)("td",{children:e.category}),Object(o.jsx)("td",{children:e.price}),Object(o.jsx)("td",{children:e.countInStock}),Object(o.jsx)("td",{children:e.rating}),Object(o.jsx)("td",{children:e.numReviews}),Object(o.jsx)("td",{children:e.description}),Object(o.jsx)("td",{children:e.createdAt}),Object(o.jsx)("td",{children:e.updatedAt}),Object(o.jsx)("td",{children:Object(o.jsx)(d.c,{to:"/edit/product/".concat(e._id),children:Object(o.jsx)("i",{className:"fas fa-pen"})})}),Object(o.jsx)("td",{children:Object(o.jsx)(d.c,{to:"/product/".concat(e._id),children:Object(o.jsx)("i",{className:"fas fa-eye"})})})]},e._id)}))})]})]})})}function Ye(e){var t=Object(a.b)(),c=e.match.params.id,n=Object(a.c)((function(e){return e.productDetail})),s=n.product,i=n.loading,d=n.error,l=Object(a.c)((function(e){return e.productUpdate})),j=l.success,u=l.error,h=Object(r.useState)(),p=Object(b.a)(h,2),m=p[0],g=p[1],_=Object(r.useState)(),N=Object(b.a)(_,2),C=N[0],I=N[1],T=Object(r.useState)(),P=Object(b.a)(T,2),R=P[0],A=P[1],D=Object(r.useState)(),w=Object(b.a)(D,2),U=w[0],k=w[1],F=Object(r.useState)(),L=Object(b.a)(F,2),q=L[0],M=L[1],Q=Object(r.useState)(),B=Object(b.a)(Q,2),$=B[0],Y=B[1];Object(r.useEffect)((function(){s?(g(s.brand),I(s.name),A(s.category),k(s.price),M(s.countInStock),Y(s.description),s._id!==c&&t(y(c))):t(y(c))}),[t,s,c]);return Object(o.jsx)("div",{children:i?Object(o.jsx)(E,{}):d?Object(o.jsx)(S,{children:d}):u?Object(o.jsx)(S,{children:u}):Object(o.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),t(function(e,t){return function(){var c=Object(x.a)(O.a.mark((function c(r){var n,a;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r({type:v.PRODUCT_UPDATE_REQUEST,payload:e}),c.prev=1,c.next=4,f.a.put("/api/products/update/".concat(e),{product:t});case 4:n=c.sent,a=n.data,r({type:v.PRODUCT_UPDATE_SUCCESS,payload:a}),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),r({type:v.PRODUCT_UPDATE_FAIL,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 12:case"end":return c.stop()}}),c,null,[[1,9]])})));return function(e){return c.apply(this,arguments)}}()}(c,{brand:m,name:C,category:R,price:U,countInStock:q,description:$}))},children:[j&&Object(o.jsx)(S,{children:"Product updated succesfully"}),Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Edit Product"})}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"brand",children:"Brand"}),Object(o.jsx)("input",{type:"text",id:"brand",placeholder:"Enter brand",value:m,required:!0,onChange:function(e){return g(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"name",children:"Name"}),Object(o.jsx)("input",{type:"text",id:"name",placeholder:"Enter name",value:C,required:!0,onChange:function(e){return I(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"category",children:"category"}),Object(o.jsx)("input",{type:"text",id:"category",placeholder:"Enter category",value:R,required:!0,onChange:function(e){return A(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"price",children:"Price"}),Object(o.jsx)("input",{type:"number",id:"price",placeholder:"Enter price",value:U,required:!0,onChange:function(e){return k(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"stock",children:"Stock"}),Object(o.jsx)("input",{type:"number",id:"stock",placeholder:"Enter stock",value:q,required:!0,onChange:function(e){return M(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{htmlFor:"description",children:"Description"}),Object(o.jsx)("input",{type:"text",id:"description",placeholder:"Enter description",value:$,required:!0,onChange:function(e){return Y(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{}),Object(o.jsx)("button",{className:"primary",type:"submit",children:"Update"})]})]})})}var Ge=function(){return Object(o.jsx)(d.a,{children:Object(o.jsxs)("div",{className:"grid-container",children:[Object(o.jsx)(d.b,{children:Object(o.jsx)(Le,{})}),Object(o.jsxs)("aside",{className:"sidebar",children:[Object(o.jsx)("h3",{children:"Shopping Categories"}),Object(o.jsx)("button",{className:"sidebar-close-button",children:"x"}),Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)(d.c,{to:"index.html",children:"Pants"})}),Object(o.jsx)("li",{children:Object(o.jsx)(d.c,{to:"index.html",children:"Shirts"})})]})]}),Object(o.jsxs)(d.b,{children:[Object(o.jsx)(l.b,{path:"/signin",component:G}),Object(o.jsx)(l.b,{path:"/register",component:J}),Object(o.jsx)(l.b,{path:"/cart/:id?",component:w}),Object(o.jsx)(l.b,{path:"/product/:id",component:_}),Object(o.jsx)(l.b,{path:"/edit/product/:id",component:Ye}),Object(o.jsx)(l.b,{path:"/",component:C,exact:!0}),Object(o.jsx)(l.b,{path:"/shipping",component:Z}),Object(o.jsx)(l.b,{path:"/checkout",component:W}),Object(o.jsx)(l.b,{path:"/payment",component:ee}),Object(o.jsx)(l.b,{path:"/placeorder",component:ve}),Object(o.jsx)(l.b,{path:"/order/:id",component:Te}),Object(o.jsx)(l.b,{path:"/orderhistory",component:Pe}),Object(o.jsx)(Fe,{path:"/profile",component:we}),Object(o.jsx)(Be,{path:"/admin/orders",component:Me}),Object(o.jsx)(Be,{path:"/admin/products",component:$e})]}),Object(o.jsx)(d.b,{children:Object(o.jsx)(qe,{})})]})})},Je=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,103)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),r(e),n(e),a(e),s(e)}))},ze=c(29),He=c(48),Ve=c(21),Ke=Ve.PRODUCT_LIST_FAIL,Xe=Ve.PRODUCT_LIST_REQUEST,We=Ve.PRODUCT_LIST_SUCCESS,Ze=Ve.PRODUCT_DETAILS_REQUEST,et=Ve.PRODUCT_DETAILS_FAIL,tt=Ve.PRODUCT_DETAILS_SUCCESS,ct=Ve.PRODUCT_UPDATE_REQUEST,rt=Ve.PRODUCT_UPDATE_SUCCESS,nt=Ve.PRODUCT_UPDATE_FAIL,at={userSignin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null},cart:{cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],shippingAddress:localStorage.getItem("shippingAddress")?JSON.parse(localStorage.getItem("shippingAddress")):{},paymentMethod:"Paypal"}},st=Object(ze.b)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:return{loading:!0};case We:return{loading:!1,products:t.payload};case Ke:return{loading:!1,error:t.payload};default:return e}},productDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze:return{loading:!0};case tt:return{loading:!1,product:t.payload};case et:return{loading:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:var c=t.payload,r=e.cartItems.find((function(e){return e.product===c.product}));return r?Object(U.a)(Object(U.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.product===r.product?c:e}))}):Object(U.a)(Object(U.a)({},e),{},{cartItems:[].concat(Object(u.a)(e.cartItems),[c])});case T:return Object(U.a)(Object(U.a)({},e),{},{cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))});case P:return Object(U.a)(Object(U.a)({},e),{},{shippingAddress:t.payload});case R:return Object(U.a)(Object(U.a)({},e),{},{paymentMethod:t.payload});case A:return Object(U.a)(Object(U.a)({},e),{},{cartItems:[]});default:return e}},userSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{loading:!0};case F:return{loading:!1,userInfo:t.payload};case L:return{loading:!1,error:t.payload};case q:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return{loading:!0};case F:return{loading:!1,userInfo:t.payload};case Q:return{loading:!1,error:t.payload};default:return e}},createOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return{loading:!0};case ce:return{loading:!1,success:!0,order:t.payload};case re:return{loading:!1,error:t.payload};case ne:return{};default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return{loading:!0};case se:return{loading:!1,order:t.payload};case ie:return{loading:!1,error:t.payload};default:return e}},payOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{success:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return{loading:!0};case le:return{loading:!1,success:!0};case oe:return{loading:!1,error:t.payload};case je:return{};default:return e}},orderHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:return{loading:!0};case be:return{loading:!1,orders:t.payload};case he:return{loading:!1,error:t.payload};default:return e}},updateUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{loading:!0};case $:return{loading:!1,user:t.payload};case Y:return{loading:!1,error:t.payload};default:return e}},banksList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,data:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return{loading:!0};case Se:return{loading:!1,data:t.payload};case Ee:return{loading:!1,error:t.payload};default:return e}},registerPayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return{loading:!0};case Ne:return{loading:!1,pseTransaction:t.payload};case Ce:return{loading:!1,error:t.payload};default:return e}},orderDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return{loading:!0};case se:return{loading:!0,success:t.payload};case Oe:return{loading:!0,error:t.payload};default:return e}},listOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return{loading:!0};case me:return{loading:!1,orders:t.payload};case fe:return{loading:!1,error:t.payload};default:return e}},productUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,success:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ct:return{loading:!0};case rt:return{loading:!1,product:t.payload,success:!0};case nt:return{loading:!1,error:t.payload};default:return e}}}),it=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ze.c,dt=Object(ze.d)(st,at,it(Object(ze.a)(He.a)));i.a.render(Object(o.jsx)(a.a,{store:dt,children:Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(Ge,{})})}),document.getElementById("root")),Je()}},[[81,1,2]]]);
//# sourceMappingURL=main.eee1bf53.chunk.js.map